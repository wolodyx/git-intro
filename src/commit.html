

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Фиксация изменений &#8212; Git из командной строки</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'src/commit';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Изучение истории" href="history.html" />
    <link rel="prev" title="Создание хранилища" href="init.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Git из командной строки - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Git из командной строки - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Введение
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Введение в основы</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="whatisgit.html">Что такое Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="cvs-history.html">История развития СКВ</a></li>
<li class="toctree-l1"><a class="reference internal" href="collaborative-edit.html">Совместная работа над документом</a></li>
<li class="toctree-l1"><a class="reference internal" href="cvs.html">Управление версиями</a></li>
<li class="toctree-l1"><a class="reference internal" href="changeset.html">Набор изменений</a></li>
<li class="toctree-l1"><a class="reference internal" href="git-clients.html">Клиенты Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Настройка рабочего окружения</a></li>
<li class="toctree-l1"><a class="reference internal" href="test0.html">Проверочная работа</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Работа с проектом</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="cli-client.html">Клиент командной строки</a></li>
<li class="toctree-l1"><a class="reference internal" href="help.html">Работа со справкой</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Работа с настройками</a></li>
<li class="toctree-l1"><a class="reference internal" href="edit.html">Изменение рабочей копии</a></li>
<li class="toctree-l1"><a class="reference internal" href="init.html">Создание хранилища</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Фиксация изменений</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">Изучение истории</a></li>
<li class="toctree-l1"><a class="reference internal" href="test1.html">Проверочная работа</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Работа в команде</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="git-server.html">Git-сервер</a></li>
<li class="toctree-l1"><a class="reference internal" href="clone.html">Клонирование хранилища</a></li>
<li class="toctree-l1"><a class="reference internal" href="branch.html">Работа с ветками</a></li>
<li class="toctree-l1"><a class="reference internal" href="merge.html">Слияние изменений</a></li>
<li class="toctree-l1"><a class="reference internal" href="sync.html">Синхронизация с удаленными хранилищами</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">Порядок работы с Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="test2.html">Проверочная работа</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/src/commit.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Фиксация изменений</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Введение</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Состояния файлов</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Управление состоянием файлов</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Фиксация изменений</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">Дополнительные источники</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="id1">
<h1>Фиксация изменений<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h1>
<section id="id2">
<h2>Введение<a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h2>
<p>Прежде чем начать фиксировать изменения в файлах, необходимо познакомиться с состояниями файлов, наблюдения и управления ими.
Это осуществляется командами <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code> и <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code>.</p>
</section>
<section id="id3">
<h2>Состояния файлов<a class="headerlink" href="#id3" title="Permalink to this heading">#</a></h2>
<p>Познакомимся с состояниями файлов, в которых они могут быть для Git.
Научимся видеть эти состояния командой <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code>.</p>
<!-- Отслеживаемые и неотслеживаемые файлы -->
<p>Git интересуют файлы в рабочем каталоге, но не за его пределами.
Интерес выражается в том, что в последующем пользователю будет предложено добавить изменения в них в историю хранилища.
Все файлы в рабочем каталоге делятся на <em>отслеживаемые</em> (tracked) и <em>неотслеживаемые</em> (untracked).
К отслеживаемым файлам относятся те, которые до этого присутствовали в ревизии, из которой извлечена рабочая копия.
Недавно созданные файлы, еще не попавшие в историю или индекс (который мы рассмотрим ниже), будут относится к категории неотслеживаемых.</p>
<figure class="align-default">
<img alt="../_images/file-states.png" src="../_images/file-states.png" />
</figure>
<!-- Неотслеживаемые файлы и артефакты сборки -->
<p>В процессе работы над проектом в рабочем каталоге появляются новые файлы, например, сгенерированные системой сборки, компилятором, тестовой системой, архиватором.
Сюда входят объектные, исполняемые, временные и архивные файлы.
Эти файлы производны от исходных кодов, сценариев сборки и представляют краткосрочный интерес.
Их еще называют <em>артефактами сборки</em>.
Даже если их удалить из файловой системы, они могут быть повторно получены пересборкой программы.
Считается хорошей практикой держать артефакты сборки в отдельном каталоге, как например в <code class="docutils literal notranslate"><span class="pre">CMake</span></code>.
Но система сборки <code class="docutils literal notranslate"><span class="pre">Make</span></code> создает артефакты рядом с файлами исходным кодом, что засоряет рабочий каталог.</p>
<!-- Файл `.gitignore` -->
<p>Таким образом, все неотслеживаемые файлы можно разделить на две категории:</p>
<ul class="simple">
<li><p>новые файлы, добавляемые в скором времени в следующую ревизию;</p></li>
<li><p>игнорируемые, путь в хранилище которым закрыт навсегда.</p></li>
</ul>
<p>Чтобы файлы из первой категории не потерялись среди многочисленных файлов второй, в Git добавлены списки игнорируемых файлов и каталогов.
Они перечисляются в файле <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> в формате регулярных выражений.
Сам файл располагается в корне рабочего каталога.
Содержимое этого файла зависит от используемого языка программирования, библиотек и инструментов.
Разработчики GitHub в открытом проекте <a class="reference external" href="https://github.com/github/gitignore">gitignore</a> собрали примеры этих файлов с привязкой к используемым программным технологиям.</p>
<!-- Отслеживаемые файлы -->
<p>Отслеживаемые файлы составляют проект программы и основу для следующей ревизии.
Они в свою очередь делятся на три части:</p>
<ul class="simple">
<li><p>зафиксированные;</p></li>
<li><p>измененные;</p></li>
<li><p>проиндексированные.</p></li>
</ul>
<figure class="align-default">
<img alt="../_images/file-states-flow.png" src="../_images/file-states-flow.png" />
</figure>
<!-- Зафиксированный и измененный файлы -->
<p>После клонирования и последующего извлечения рабочей копии все файлы в рабочем каталоге относятся к зафиксированным.
Если отредактировать зафиксированный файл, то он перейдет в измененное состояние.
Если откатить изменения у измененного файла, то он перейдет обратно в зафиксированное состояние.</p>
<!-- Проиндексированный файл -->
<p>Индексированные файлы предназначены для включения изменений в историю.
По-другому, индексированный файл рассматривается как измененный файл, помещенный в специальную область, называемую <em>индексом</em>.
Индекс – это область, дополнительная к рабочей копии и хранилищу.
Физически она расположена внутри хранилища, не передается и не клонируется.</p>
<figure class="align-default">
<img alt="../_images/git-index.png" src="../_images/git-index.png" />
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Файл, помещенный в индекс, уже не является измененным.
Но если после индексации файл изменить еще раз, то он одновременно будет измененным и проиндексированным.</p>
</div>
<!-- `git status` и состояние файлов -->
<p>Состояние файлов в рабочем каталоге показывает команда <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code>.
В примере ниже она показывает, что файл <code class="docutils literal notranslate"><span class="pre">LampServer.cpp</span></code> изменен и неотслеживаются файлы из каталога <code class="docutils literal notranslate"><span class="pre">build/</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">skt@home:~/MyProjects/RemoteLamps$ </span>git<span class="w"> </span>status
<span class="go">На ветке main</span>
<span class="go">Ваша ветка обновлена в соответствии с «origin/main».</span>

<span class="go">Изменения, которые не в индексе для коммита:</span>
<span class="go">  (используйте «git add &lt;файл&gt;…», чтобы добавить файл в индекс)</span>
<span class="go">  (используйте «git restore &lt;файл&gt;…», чтобы отменить изменения в рабочем каталоге)</span>
<span class="go">	изменено:      LampServer.cpp</span>

<span class="go">Неотслеживаемые файлы:</span>
<span class="go">  (используйте «git add &lt;файл&gt;…», чтобы добавить в то, что будет включено в коммит)</span>
<span class="go">	build/</span>

<span class="go">нет изменений добавленных для коммита</span>
<span class="gp gp-VirtualEnv">(используйте «git add» и/или «git commit -a»)</span>
</pre></div>
</div>
<!-- Компактный вывод команды `git status` -->
<p>Кроме состояний файлов, команда также подсказывает как изменить эти состояния.
На первых порах эти подсказки помогают, но в будущем многословность только мешают.
Компактный вывод делает опция <code class="docutils literal notranslate"><span class="pre">-s</span></code> (<code class="docutils literal notranslate"><span class="pre">--short</span></code>) (“short” переводится с английского как “короткий”).</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">skt@home:~/MyProjects/RemoteLamps$ </span>git<span class="w"> </span>status<span class="w"> </span>-s
<span class="go">M  LampServer.cpp</span>
<span class="go">?? build/</span>
</pre></div>
</div>
<!-- Переход в следующий раздел -->
<p>Как переводить файл из одного состояния в другой узнаем ниже.</p>
</section>
<section id="id4">
<h2>Управление состоянием файлов<a class="headerlink" href="#id4" title="Permalink to this heading">#</a></h2>
<!-- Откат изменений в файле -->
<p>Для изменения текстового файла достаточно воспользоваться редактором.
Откатить изменения и вернуть содержимое файла в начальное состояние позволяет команда <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">restore</span></code>.</p>
<!-- Помещение измененного файла в индекс -->
<p>Команда <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> помещает фиксируемые файлы в индекс, еще говорят – индексирует файлы.
Эта же команда применима и к неотслеживаемым файлам, чтобы превратить их в историю.</p>
<!-- Исключение файла из индекса -->
<p>Команда <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">restore</span></code> с опцией <code class="docutils literal notranslate"><span class="pre">--staged</span></code> исключает файл из индекса.</p>
<!-- Удаление фиксированных файлов -->
<p>На практике возникает ситуация, когда нужно удалить зафиксированный файл.
Например, если файл с исходным кодом больше не используется или по ошибке был зафиксирован ненужный файл.
Системная утилита <code class="docutils literal notranslate"><span class="pre">rm</span></code> удаляет файл из файловой системы.
После такого удаления файл отметится как измененный с пометкой “удалено” в выводе команды <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code>.
Команда <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> проиндексирует измененный (удаленный) файл, чтобы в последующем зафиксировать его в истории.
Последовательность эффектов от <code class="docutils literal notranslate"><span class="pre">rm</span></code> и <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> повторяет команда <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rm</span></code>, которая удалит файл и сразу поместит его в индекс.
Git защищает данные от потери и ограничивает случайное удаление измененных файлов.
Удаляемый файл должен быть фиксированным.
Если это не так, то придется отменить изменения или передать команде удаления опцию <code class="docutils literal notranslate"><span class="pre">--force</span></code> или <code class="docutils literal notranslate"><span class="pre">--cached</span></code>.</p>
<!-- Шаблоны в аргументах -->
<p>Команды <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">restore</span></code>, <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code>, <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rm</span></code> выше мы использовали только одним аргументом-файлом.
На практике приходится оперировать несколькими файлами.
Вызывать команду для каждого файла по отдельности утомительно и не эффективно.
Есть два способа, чтобы обойти эту ситуацию:</p>
<ol class="arabic simple">
<li><p>передать несколько аргументов;</p></li>
<li><p>использовать регулярные выражения в аргументах.</p></li>
</ol>
<p>Так, команда <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">*.c</span></code> добавляет в индекс все файлы в текущем каталоге с расширением <code class="docutils literal notranslate"><span class="pre">.c</span></code>, а команда <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rm</span> <span class="pre">**/*.log</span></code> удалит во всех вложенных каталогах зафиксированные файлы с расширением <code class="docutils literal notranslate"><span class="pre">.log</span></code>.</p>
<!-- Перемещение фиксированных файлов -->
<p>Следующая операция, кроме удаления – это перемещение файлов, которая также реализует переименование.
Перемещение файлов и каталогов выполняет системная утилита <code class="docutils literal notranslate"><span class="pre">mv</span></code>.
Состояние перемещенного файла команда <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code> показывается как изменение файла с пометкой “удалено” и появление неотслеживаемого файла.
После индексации обоих файлов, Git обнаружит и покажет перемещение.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">bob@pc:~/projects/repo$ </span>mv<span class="w"> </span>main.c<span class="w"> </span>main.cpp
<span class="gp">bob@pc:~/projects/repo$ </span>git<span class="w"> </span>status<span class="w"> </span>-s
<span class="go"> D main.c</span>
<span class="go">?? main.cpp</span>
<span class="gp">bob@pc:~/projects/repo$ </span>git<span class="w"> </span>add<span class="w"> </span>main.c
<span class="go">main.cpp</span>
<span class="gp">bob@pc:~/projects/repo$ </span>git<span class="w"> </span>status<span class="w"> </span>-s
<span class="go">R  main.c -&gt; main.cpp</span>
</pre></div>
</div>
<p>Команда <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">mv</span></code> объединяет в себе функции утилиты <code class="docutils literal notranslate"><span class="pre">mv</span></code> и команды <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code>.
Она перемещает файлы и сразу добавляет информацию об этом в индекс.
Тот же самый эффект выше можно было бы достигнуть командой <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">mv</span> <span class="pre">main.c</span> <span class="pre">main.cpp</span></code>.</p>
<!-- Переход в следующий раздел -->
<p>Цель этого раздела – подготовить индекс для последующей фиксации.
Следующий раздел покажет нам как выполнить фиксацию.</p>
</section>
<section id="id5">
<h2>Фиксация изменений<a class="headerlink" href="#id5" title="Permalink to this heading">#</a></h2>
<p>Команда <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code> фиксирует изменения в хранилище, добавляя во внутреннюю базу данных запись, называемую <em>коммитом</em>.
С коммитом связан следующий набор данных:</p>
<ul class="simple">
<li><p>изменения в файлах (будут взяты из индекса);</p></li>
<li><p>сообщение, описывающее изменения (будет установлено при фиксации);</p></li>
<li><p>дата и время фиксации (будут взяты из системы);</p></li>
<li><p>имя и электронная почта автора изменений (были указаны при настройке Git).</p></li>
</ul>
<figure class="align-default">
<img alt="../_images/commit-structure.png" src="../_images/commit-structure.png" />
</figure>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Локальное системное время должно быть синхронизировано с мировым, чтобы не возникло противоречий в данных при обмене изменениями с другим хранилищем.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Фиксация завершится с ошибкой, если ранее при настройке Git не указали имя и электронную почту пользователя.
Они были заданы при <a class="reference internal" href="config.html"><span class="doc std std-doc">настройке Git</span></a>.</p>
</div>
<p>Будем считать, что индекс не пуст.
Зафиксируем изменения, вызвав команду <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code>.
Команда откроет текстовый файл примерно со следующим содержимым:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Пожалуйста, введите сообщение коммита для ваших изменений. Строки,
# начинающиеся с «#» будут проигнорированы, а пустое сообщение
# отменяет процесс коммита.
#
# Текущая ветка: main
# Изменения, которые будут включены в коммит:
#       переименовано: main.c -&gt; main.cpp
#
# Неотслеживаемые файлы:
#       text.cpy
#
</pre></div>
</div>
<!-- Опция `-m` -->
<p>Если описание коммита однострочное, то его быстрее передать команде через опцию <code class="docutils literal notranslate"><span class="pre">-m</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;Описание изменений&quot;</span>
</pre></div>
</div>
<!-- Фиксация изменений без добавления в индекс -->
<p>Фиксации предваряет подготовка индекса.
Команда <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code> проиндексирует все измененные файлы автоматически, если ей передать опцию <code class="docutils literal notranslate"><span class="pre">-a</span></code> (<code class="docutils literal notranslate"><span class="pre">--all</span></code>).</p>
<!-- Просмотр изменений перед коммитом -->
<p>В больших и организованных проектах обращают особое внимание на сообщение и содержание коммитов.
Для этого вводят соглашения об оформлении коммитов, которым должны следовать все участники проекта.
Одно из важных требований гласит, что коммит должен содержать конкретное завершенное изменение, касающееся одной задачи.
Из него само собой вытекает четкое сообщение коммита, которое упрощает участникам изучение проекта.
Из того факта, что работа над задачей завершилась, еще не следует, что все измененные файлы пригодны для фиксации.
Если исходить из описания задачи, например “Исправление ошибки …”, то изменения в виде добавления новой строки и переименования переменных входят в задачу “Рефакторинг …”.
Изменения распределяются по нескольким коммитам.
И вот здесь особую роль играет просмотр содержания фиксируемых файлов.
Это возможно опцией <code class="docutils literal notranslate"><span class="pre">-v</span></code> (<code class="docutils literal notranslate"><span class="pre">--verbose</span></code>), когда сообщение набирается в редакторе (без опции <code class="docutils literal notranslate"><span class="pre">-m</span></code>): <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">-v</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1"># Пожалуйста, введите сообщение коммита для ваших изменений. Строки,</span>
<span class="c1"># начинающиеся с «#» будут проигнорированы, а пустое сообщение</span>
<span class="c1"># отменяет процесс коммита.</span>
<span class="c1">#</span>
<span class="c1"># Текущая ветка: main</span>
<span class="c1"># Изменения, которые будут включены в коммит:</span>
<span class="c1">#       изменено:      main.cpp</span>
<span class="c1">#</span>
<span class="c1"># Неотслеживаемые файлы:</span>
<span class="c1">#       text.cpy</span>
<span class="c1">#</span>
<span class="c1"># ------------------------ &gt;8 ------------------------</span>
<span class="c1"># Не изменяйте или удаляйте строку выше этой.</span>
<span class="c1"># Всё, что ниже — будет проигнорировано.</span>
<span class="n">diff</span> <span class="o">--</span><span class="n">git</span> <span class="n">a</span><span class="o">/</span><span class="n">main</span><span class="o">.</span><span class="n">cpp</span> <span class="n">b</span><span class="o">/</span><span class="n">main</span><span class="o">.</span><span class="n">cpp</span>
<span class="n">index</span> <span class="n">ad5fe9b</span><span class="o">..</span><span class="n">ff4f753</span> <span class="mi">100644</span>
<span class="o">---</span> <span class="n">a</span><span class="o">/</span><span class="n">main</span><span class="o">.</span><span class="n">cpp</span>
<span class="o">+++</span> <span class="n">b</span><span class="o">/</span><span class="n">main</span><span class="o">.</span><span class="n">cpp</span>
<span class="o">@@</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">7</span> <span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="mi">20</span> <span class="o">@@</span>
 <span class="c1">#include &lt;iostream&gt;</span>

<span class="o">+</span><span class="n">void</span> <span class="n">usage</span><span class="p">()</span>
<span class="o">+</span><span class="p">{</span>
<span class="o">+</span>       <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;usage hello [--name UserName]</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
<span class="o">+</span><span class="p">}</span>
<span class="o">+</span>
 <span class="nb">int</span> <span class="n">main</span><span class="p">(</span><span class="nb">int</span> <span class="n">argc</span><span class="p">,</span> <span class="n">char</span><span class="o">**</span> <span class="n">argv</span><span class="p">)</span>
 <span class="p">{</span>
<span class="o">+</span>       <span class="k">for</span><span class="p">(</span><span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
<span class="o">+</span>       <span class="p">{</span>
<span class="o">+</span>               <span class="k">if</span><span class="p">(</span><span class="n">strcmpn</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="s2">&quot;--help&quot;</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<span class="o">+</span>               <span class="p">{</span>
<span class="o">+</span>                       <span class="n">usage</span><span class="p">();</span>
<span class="o">+</span>                       <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="o">+</span>               <span class="p">}</span>
<span class="o">+</span>       <span class="p">}</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
 <span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id6">
<h2>Дополнительные источники<a class="headerlink" href="#id6" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/github/gitignore">A collection of .gitignore templates</a></p></li>
<li><p><a class="reference external" href="https://www.conventionalcommits.org/ru/v1.0.0/">Соглашение о коммитах</a></p></li>
<li><p><a class="reference external" href="https://cbea.ms/git-commit/">How to Write a Git Commit Message</a></p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./src"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="init.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Создание хранилища</p>
      </div>
    </a>
    <a class="right-next"
       href="history.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Изучение истории</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Введение</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Состояния файлов</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Управление состоянием файлов</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Фиксация изменений</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">Дополнительные источники</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Владимир Лазарев
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>