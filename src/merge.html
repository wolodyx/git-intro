

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Объединение изменений &#8212; Git из командной строки</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'src/merge';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Синхронизация с удаленными хранилищами" href="sync.html" />
    <link rel="prev" title="Работа с ветками" href="branch.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Git из командной строки - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Git из командной строки - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Введение
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Введение в основы</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="whatisgit.html">Что такое Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="cvs-history.html">История развития СКВ</a></li>
<li class="toctree-l1"><a class="reference internal" href="collaborative-edit.html">Совместная работа над документом</a></li>
<li class="toctree-l1"><a class="reference internal" href="cvs.html">Управление версиями</a></li>
<li class="toctree-l1"><a class="reference internal" href="changeset.html">Набор изменений</a></li>
<li class="toctree-l1"><a class="reference internal" href="tree.html">Дерево коммитов</a></li>
<li class="toctree-l1"><a class="reference internal" href="git-clients.html">Клиенты Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Настройка рабочего окружения</a></li>
<li class="toctree-l1"><a class="reference internal" href="test0.html">Проверочная работа</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Работа с проектом</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="cli-client.html">Клиент командной строки</a></li>
<li class="toctree-l1"><a class="reference internal" href="help.html">Работа со справкой</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Работа с настройками</a></li>
<li class="toctree-l1"><a class="reference internal" href="edit.html">Изменение рабочей копии</a></li>
<li class="toctree-l1"><a class="reference internal" href="init.html">Создание хранилища</a></li>
<li class="toctree-l1"><a class="reference internal" href="commit.html">Фиксация изменений</a></li>
<li class="toctree-l1"><a class="reference internal" href="file-states.html">Управление состоянием файлов</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">История изменений</a></li>
<li class="toctree-l1"><a class="reference internal" href="git-log-format.html">Отображение коммитов</a></li>
<li class="toctree-l1"><a class="reference internal" href="git-log-filter.html">Фильтрация коммитов</a></li>
<li class="toctree-l1"><a class="reference internal" href="test1.html">Проверочная работа</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Работа в команде</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="git-server.html">Git-сервер</a></li>
<li class="toctree-l1"><a class="reference internal" href="clone.html">Клонирование хранилища</a></li>
<li class="toctree-l1"><a class="reference internal" href="branch.html">Работа с ветками</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Объединение изменений</a></li>
<li class="toctree-l1"><a class="reference internal" href="sync.html">Синхронизация с удаленными хранилищами</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">Рабочие процессы в Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="test2.html">Проверочная работа</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/src/merge.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Объединение изменений</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Перенос изменений коммитом слияния</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Перемотка вперед</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Перебазирование</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Разрешение конфликтов слияния</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#kdiff3">Разрешение конфликта с KDiff3</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">Обслуживание веток</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="id1">
<h1>Объединение изменений<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h1>
<!--
Тема со слиянием изменением обширна за счет
-->
<p>В этом разделе мы:</p>
<ul class="simple">
<li><p>узнаем о трех способах объединения изменений: слиянии, перемотке и перебазировании;</p></li>
<li><p>познакомимся с командой <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span></code>;</p></li>
<li><p>научимся разрешать конфликты слияния.</p></li>
</ul>
<p>Бывает необходимым объединить результаты работы двух разработчиков.
Слияние изменений возникает при объединении веток, а также при обновлении рабочего каталога до последней ревизии основной ветки.
при слиянии файлов не следует терять данные и не нарушить целостность проекта.
Операция слияния происходит автоматически (без вмешательства человека), если изменения не пересекаются, т.е. выполнены в разных файлах или в разных строках одного файла.</p>
<section id="id2">
<h2>Перенос изменений коммитом слияния<a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h2>
<!-- Команда `git merge` и слияние с коммитом -->
<p>Команда <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span></code> переносит изменения из одной ветки в другую.
Представим ситуацию, когда есть дерево коммитов с основной веткой <code class="docutils literal notranslate"><span class="pre">master</span></code> и тематической <code class="docutils literal notranslate"><span class="pre">bugfix</span></code>.
В <code class="docutils literal notranslate"><span class="pre">bugfix</span></code> двумя коммитами исправлена ошибка.
За время работы над <code class="docutils literal notranslate"><span class="pre">bugfix</span></code> в основной ветке появился один коммит.
Указатель на текущую ветку <code class="docutils literal notranslate"><span class="pre">HEAD</span></code> показывает на <code class="docutils literal notranslate"><span class="pre">master</span></code>.
В этом состоянии команда <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span> <span class="pre">bugfix</span></code> переносит изменения из ветки <code class="docutils literal notranslate"><span class="pre">bugfix</span></code> в текущую ветку <code class="docutils literal notranslate"><span class="pre">master</span></code> через <em>коммит слияния</em> с идентификатором <code class="docutils literal notranslate"><span class="pre">2a5</span></code>.
Текущая ветка <code class="docutils literal notranslate"><span class="pre">master</span></code> перемещается на этот новый коммит.</p>
<figure class="align-default">
<img alt="../_images/branch-6.png" src="../_images/branch-6.png" />
</figure>
<!-- Удаление ветки `git branch -d <branch>` -->
<p>Указатель функциональной ветки <code class="docutils literal notranslate"><span class="pre">bugfix</span></code> после объединения не переместился.
Этой веткой еще можно воспользоваться и развивать ее, но смысла в этом нет, так как она выполнила свою роль.
Она может быть удалена.
При удалении мы не потеряем ее коммиты, так как они теперь стали достижимыми из основной ветки.
Удаление ветки приведет только к удалению указателя на коммит.
Команда <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span> <span class="pre">-d</span> <span class="pre">bugfix</span></code> успешно удалит ветку <code class="docutils literal notranslate"><span class="pre">bugfix</span></code>.
Возникает вопрос, а не хранил ли именованный указатель ветки информацию об исправленной ошибке?
Может ли пользователь Git по отдельным описаниям коммитов функциональной ветки сделать вывод, что здесь происходило исправление конкретной ошибки?
Так вот, информация об исправлении ошибки должна быть ясно прописана в описании коммита слияния <code class="docutils literal notranslate"><span class="pre">2a5</span></code>.
Коммит слияния как бы вносит изменения в ветку скопом.</p>
</section>
<section id="id3">
<h2>Перемотка вперед<a class="headerlink" href="#id3" title="Permalink to this heading">#</a></h2>
<p>Объединение веток упростится, если в ветке, куда переносятся изменения, отсутствуют коммиты.
Пример такой ситуации показан на рисунке ниже.
Здесь достаточно переместить указатель ветки <code class="docutils literal notranslate"><span class="pre">master</span></code> к последнему коммиту <code class="docutils literal notranslate"><span class="pre">bugfix</span></code>.
Этот прием называется <em>перемоткой вперед</em>, от английского <code class="docutils literal notranslate"><span class="pre">fast</span> <span class="pre">forward</span></code>.</p>
<figure class="align-default">
<img alt="../_images/branch-4.png" src="../_images/branch-4.png" />
</figure>
<p>Но и в этой ситуации можно создать коммит слияния, если явно отказаться от перемотки опцией <code class="docutils literal notranslate"><span class="pre">--no-ff</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">merge</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">ff</span> <span class="n">bugfix</span>
</pre></div>
</div>
<p>Такой выбор объясняется тем, что автор не хочет, чтобы коммиты его ветки не стали коммитами основной ветки, так как каждая из них не удовлетворяет условию завершенности.
А таким условием обладает только коммит слияния.</p>
<figure class="align-default">
<img alt="../_images/branch-4.1.png" src="../_images/branch-4.1.png" />
</figure>
</section>
<section id="id4">
<h2>Перебазирование<a class="headerlink" href="#id4" title="Permalink to this heading">#</a></h2>
<p>Перебазирование – это перенос последовательности коммитов на другой коммит.
Графически это выглядит как отрезание части ветки с места ветвления и перенос ее в другое место.
Те коммиты, от которых ветка была отсоединена и к которым закреплена, называют базовыми.
Отметим, что при у переносимых коммитов меняются идентификаторы, так как меняются родители.</p>
<p>Представим знакомую ситуацию на рисунке ниже с двумя ветками <code class="docutils literal notranslate"><span class="pre">master</span></code> и <code class="docutils literal notranslate"><span class="pre">bugfix</span></code>.
Она отличается от вышеприведенного тем, что текущая ветка здесь <code class="docutils literal notranslate"><span class="pre">bugfix</span></code>.
Команда <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rebase</span> <span class="pre">master</span></code> перенесет текущую ветку <code class="docutils literal notranslate"><span class="pre">bugfix</span></code> на ветку <code class="docutils literal notranslate"><span class="pre">master</span></code>.
Чтобы закончить объединение следует или перемотать ветку <code class="docutils literal notranslate"><span class="pre">master</span></code> до <code class="docutils literal notranslate"><span class="pre">bugfix</span></code> или создать коммит слияния.</p>
<figure class="align-default">
<img alt="../_images/branch-5.png" src="../_images/branch-5.png" />
</figure>
<!-- Когда не следует использовать перебазирование -->
<p>Перебазирование, в отличие от перемотки и слияния, изменяет историю, удаляя существующие коммиты и связи между ними.
Это может усложнить объединение изменений, если кто-то еще использовал удаляемые коммиты.
Отсюда вытекает важное правило.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Нельзя перебазировать публичные ветки, (ветки, которые кто-то еще использует).
В противном случае, во время объединения дерева коммитов двух хранилищ, удаленные коммиты вернутся обратно.
В результате в истории будут две копии коммитов, вносящих одни и те же изменения.</p>
</div>
<!-- Когда следует использовать перебазирование? -->
<p>Перебазирование подходит, если вы каждым коммитом вносите в проект полностью оформленную работу.
Примеры изменений, которые не удовлетворяют этому условию:</p>
<ul class="simple">
<li><p>не компилируются;</p></li>
<li><p>не позволяют запустится программе;</p></li>
<li><p>вносят дополнительные ошибки.</p></li>
</ul>
<p>Перебазирование, как и перемотка, сохраняет историю изменений линейной.
Такая история проще для просматривания и изучения.</p>
</section>
<section id="id5">
<h2>Разрешение конфликтов слияния<a class="headerlink" href="#id5" title="Permalink to this heading">#</a></h2>
<p>Конфликтом слияния называют ситуацию, при которой изменения не могут быть слиты автоматически.
Для разрешения конфликта требуется внимание разработчика.
В каких случаях невозможно автоматически слить изменения?</p>
<ul class="simple">
<li><p>Если в текстовом файле была по-разному изменена одна и та же строка.</p></li>
<li><p>Если одновременно изменены двоичные файлы как изображения, аудио и видео.
Здесь остается только выбрать один из двух вариантов или заново создать файл, который включает оба изменения.</p></li>
<li><p>Если измененный файл был удален.</p></li>
</ul>
<p>Вместе с этим курсом доступны примеры однотипных хранилищ с коллизиями при объединении ветки <code class="docutils literal notranslate"><span class="pre">branching</span></code> с <code class="docutils literal notranslate"><span class="pre">main</span></code>.
Загрузите одно из них, разархивируйте в домашний каталог и перейдите в рабочий каталог.
Удостоверьтесь, что вы находитесь на ветке <code class="docutils literal notranslate"><span class="pre">main</span></code> командой <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git branch 
  branching
* main
</pre></div>
</div>
<p>Если вы на ветке <code class="docutils literal notranslate"><span class="pre">branching</span></code>, то переключитесь на <code class="docutils literal notranslate"><span class="pre">main</span></code> командой <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">main</span></code>.</p>
<p>Объединение веток выполняет команда <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span></code>.
Ветка, куда вносятся изменения, является текущей.
Ветка, откуда берутся изменения, передается в качестве аргумента.
Мы хотим внести изменения из <code class="docutils literal notranslate"><span class="pre">branching</span></code> в <code class="docutils literal notranslate"><span class="pre">main</span></code>, тогда выполним команду <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span> <span class="pre">branching</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git merge branching 
Автослияние RunCMakeTest.cmake
КОНФЛИКТ (содержимое): Конфликт слияния в RunCMakeTest.cmake
Сбой автоматического слияния; исправьте конфликты, затем зафиксируйте результат.
</pre></div>
</div>
<p>В нашем случае команда прервалась с сообщением о произошедшем конфликте и указал файл, где это произошло.
Посмотрим состояние файлов:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git status
Текущая ветка: main
У вас есть не слитые пути.
  (разрешите конфликты, затем запустите «git commit»)
  (используйте «git merge --abort», чтобы остановить операцию слияния)

Не слитые пути:
  (используйте «git add &lt;файл&gt;...», чтобы пометить разрешение конфликта)
	оба изменены:   RunCMakeTest.cmake

индекс пуст (используйте «git add» и/или «git commit -a»)
</pre></div>
</div>
<p>То же состояние, но с опцией <code class="docutils literal notranslate"><span class="pre">-s</span></code> покажет следующее:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git status -s
UU RunCMakeTest.cmake
</pre></div>
</div>
<p>Обозначенный таким образом файл содержит специальную разметку, указывающую на конфликт слияния.
Откройте файл и найдите размеченное следующим образом содержимое:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span> <span class="n">HEAD</span>
<span class="o">...</span>
<span class="o">=======</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span> <span class="n">branching</span>
</pre></div>
</div>
<p>Разметка показывает два блока фрагмента, которые не получилось слить: из текущей ветки и сливаемой ветки.
Ваша задача предложить отредактировать содержимое так, чтобы оно содержало актуальные изменения из обоих веток.
Также необходимо удалить разметку.
Пример кода из хранилища:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD

run_TestRepeat(UntilFail RETURN_VALUE:1 REPEAT UNTIL_FAIL:3)
run_TestRepeat(UntilPass RETURN_VALUE:0 REPEAT UNTIL_PASS:3)
run_TestRepeat(AfterTimeout RETURN_VALUE:0 REPEAT AFTER_TIMEOUT:3)

# test repeat and not run tests interact correctly
set(CASE_CMAKELISTS_SUFFIX_CODE [[
add_test(NAME testNotRun
  COMMAND ${CMAKE_COMMAND}/doesnt_exist)
  set_property(TEST testNotRun PROPERTY TIMEOUT 5)
  ]])
run_TestRepeat(NotRun RETURN_VALUE:1 REPEAT UNTIL_PASS:3)
unset(CASE_CMAKELISTS_SUFFIX_CODE)
=======
run_TestRepeat(UntilFail REPEAT UNTIL_FAIL:3)
run_TestRepeat(UntilPass REPEAT UNTIL_PASS:3)
run_TestRepeat(AfterTimeout REPEAT AFTER_TIMEOUT:3)

# test --stop-on-failure
function(run_stop_on_failure)
  set(CASE_CTEST_TEST_ARGS EXCLUDE RunCMakeVersion)
  set(CASE_CMAKELISTS_SUFFIX_CODE [[
add_test(NAME StoppingTest COMMAND ${CMAKE_COMMAND} -E false)
add_test(NAME NotRunTest COMMAND ${CMAKE_COMMAND} -E true)
  ]])

  run_ctest_test(stop-on-failure STOP_ON_FAILURE)
endfunction()
run_stop_on_failure()

# Make sure environment gets logged
function(run_environment)
  set(ENV{BAD_ENVIRONMENT_VARIABLE} &quot;Bad environment variable&quot;)
  set(CASE_CMAKELISTS_SUFFIX_CODE [[
set_property(TEST RunCMakeVersion PROPERTY ENVIRONMENT &quot;ENV1=env1;ENV2=env2&quot;)
  ]])

  run_ctest(TestEnvironment)
endfunction()
run_environment()
&gt;&gt;&gt;&gt;&gt;&gt;&gt; branching
</pre></div>
</div>
<p>После редактирования сохраните файл и добавьте его в индекс командой <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">RunCMakeTest.cmake</span></code>.
Затем зафиксируйте изменения.
Можно оставить стандартное сообщение коммита “Merge branch ‘branching’”, которое предложит Git или предоставить свой.</p>
</section>
<section id="kdiff3">
<h2>Разрешение конфликта с KDiff3<a class="headerlink" href="#kdiff3" title="Permalink to this heading">#</a></h2>
<p>Разрешение конфликтов слияния – задача сложная и ответственная.
Существуют специализированные инструменты, которые позволят облегчить и частично автоматизировать этот процесс.
Один из них – это графическая утилита KDiff3, доступная на платформах Linux и Windows.
Утилита установлена в поставляемой с курсом виртуальной машине.
Если вы находитесь внутри хранилища с неразрешенным конфликтом, вызовите утилиту командой</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">mergetool</span> <span class="o">--</span><span class="n">tool</span><span class="o">=</span><span class="n">kdiff3</span>
</pre></div>
</div>
<p>Появится диалоговое окно с сообщением о количестве разрешенных и неразрешенных конфликтов.</p>
<figure class="align-default">
<img alt="../_images/kdiff3-start-message.png" src="../_images/kdiff3-start-message.png" />
</figure>
<p>Область окна утилиты разбита на 4 части – 4 версии файла.
Нижнюю область занимает результирующий файл, который войдет в коммит слияния.
Ее и следует редактировать.
Верхняя область окна поделена на три части, показывающих три состояния одного файла:</p>
<ul class="simple">
<li><p>A, Base – файл до разветвления;</p></li>
<li><p>B, Local – файл из текущей ветки;</p></li>
<li><p>C, Remote – файл из сливаемой ветки.</p></li>
</ul>
<figure class="align-default">
<img alt="../_images/kdiff3.png" src="../_images/kdiff3.png" />
</figure>
<!-- Алгоритм слияния изменений
Слияние выполняется для каждого файла.
Базовая, локальная и серверная ревизии.
 -->
</section>
<section id="id6">
<h2>Обслуживание веток<a class="headerlink" href="#id6" title="Permalink to this heading">#</a></h2>
<p>Список веток, слитых с текущей, покажет команда <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span> <span class="pre">--merged</span></code>.
Эти ветки можно безопасно удалить.
Команда <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span> <span class="pre">--no-merged</span></code> покажет список веток, неслитых с текущей.
Такие ветки нельзя удалить, не потеряв их коммиты.
Если все-таки нужно удалить такую ветку, то выполните команду <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span> <span class="pre">-D</span> <span class="pre">&lt;branch-name&gt;</span></code>.</p>
<!--
* `git branch --no-merged main` покажет ветки, неслитые с `main`.
* `git log --no-merges`
-->
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./src"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="branch.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Работа с ветками</p>
      </div>
    </a>
    <a class="right-next"
       href="sync.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Синхронизация с удаленными хранилищами</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Перенос изменений коммитом слияния</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Перемотка вперед</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Перебазирование</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Разрешение конфликтов слияния</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#kdiff3">Разрешение конфликта с KDiff3</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">Обслуживание веток</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Владимир Лазарев
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>